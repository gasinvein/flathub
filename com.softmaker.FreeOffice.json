{
    "id": "com.softmaker.FreeOffice",
    "runtime": "org.freedesktop.Platform",
    "sdk": "org.freedesktop.Sdk",
    "runtime-version": "1.6",
    "command": "textmaker",
    "finish-args": [
        "--socket=x11", "--share=ipc",
        "--socket=wayland",
        "--device=dri",
        "--socket=pulseaudio",
        "--persist=SoftMaker",
        "--filesystem=xdg-documents",
        "--filesystem=xdg-download"
    ],
    "modules": [
        {
            "name": "libXmu",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://xorg.freedesktop.org/releases/individual/lib/libXmu-1.1.2.tar.gz",
                    "sha256": "e5fd4bacef068f9509b8226017205040e38d3fba8d2de55037200e7176c13dba"
                }
            ],
            "cleanup": [
                "/include",
                "/lib/pkgconfig",
                "/lib/*.a",
                "/lib/*.la"
            ]
        },
        {
            "name": "freeoffice",
            "buildsystem": "simple",
            "build-commands": [
                "mkdir -p /app/{bin,lib/freeoffice,share/{mime,applications,appdata,fonts}}",
                "tar -C /app/lib/freeoffice -xf freeoffice*.tar.lzma",
                "for a in textmaker planmaker presentations; do ln -s ../lib/freeoffice/$a /app/bin/$a; done",
                "ls -1 /app/lib/freeoffice/fonts | while read -r f; do ln -sf \"../../lib/freeoffice/fonts/$f\" \"/app/share/fonts/$f\"; done",
                "bash -x ./install-desktop-data.sh /app/lib/freeoffice com.softmaker.FreeOffice"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://www.softmaker.net/down/softmaker-freeoffice-931-amd64.tgz",
                    "strip-components": 0,
                    "sha1": "9b493deb2c7f3c4dd6fdccfd935efeb5408a00b2"
                },
                {
                    "type": "file",
                    "path": "install-desktop-data.sh"
                }
            ]
        }
    ]
}

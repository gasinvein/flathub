{
    "id": "com.teamviewer.TeamViewer",
    "runtime": "org.kde.Platform",
    "sdk": "org.kde.Sdk",
    "runtime-version": "5.13",
    "base": "io.qt.qtwebkit.BaseApp",
    "base-version": "5.13",
    "command": "teamviewer",
    "finish-args": [
        "--share=network",
        "--device=all",
        "--socket=pulseaudio",
        "--socket=x11",
        "--share=ipc",
        "--own-name=com.teamviewer.TeamViewer",
        "--own-name=com.teamviewer.TeamViewer.Desktop",
        "--talk-name=org.gtk.Notifications",
        "--talk-name=org.freedesktop.Notifications",
        "--talk-name=org.kde.StatusNotifierWatcher",
        "--own-name=org.kde.StatusNotifierItem-2-1",
        "--talk-name=org.a11y.Bus",
        "--system-talk-name=org.freedesktop.NetworkManager"
    ],
    "cleanup": [
        "*.a",
        "*.la",
        "/include",
        "/lib/cmake",
        "/lib/pkgconfig",
        "/lib/mkspecs"
    ],
    "cleanup-commands": [
        "rm -rfv /app/{include,lib/{pkgconfig,cmake}}"
    ],
    "modules": [
        {
            "name": "util-linux",
            "config-opts": [
                "--sbindir=/app/bin",
                "--without-systemd",
                "--disable-bash-completion",
                "--disable-agetty",
                "--disable-wall",
                "--disable-losetup",
                "--disable-fsck",
                "--disable-partx",
                "--disable-unshare",
                "--disable-nsenter",
                "--disable-setpriv",
                "--disable-zramctl",
                "--disable-libblkid",
                "--disable-libmount",
                "--disable-cramfs",
                "--disable-bfs",
                "--disable-switch_root",
                "--disable-pivot_root",
                "--disable-login",
                "--disable-su",
                "--disable-nologin",
                "--disable-sulogin"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://mirrors.edge.kernel.org/pub/linux/utils/util-linux/v2.32/util-linux-2.32.tar.xz",
                    "sha256": "6c7397abc764e32e8159c2e96042874a190303e77adceb4ac5bd502a272a4734"
                }
            ],
            "cleanup": [
                "/sbin"
            ]
        },
        {
            "name": "teamviewer",
            "buildsystem": "simple",
            "build-commands": [
                "install -Dm644 com.teamviewer.TeamViewer.appdata.xml -t /app/share/appdata/",
                "install -Dm755 apply_extra.sh /app/bin/apply_extra",
                "install -Dm755 teamviewer-wrapper.sh /app/bin/teamviewer"
            ],
            "sources": [
                {
                    "type": "file",
                    "path": "apply_extra.sh"
                },
                {
                    "type": "file",
                    "path": "teamviewer-wrapper.sh"
                },
                {
                    "type": "file",
                    "path": "com.teamviewer.TeamViewer.appdata.xml"
                },
                {
                    "type": "extra-data",
                    "only-arches": [ "x86_64" ],
                    "url": "https://dl.tvcdn.de/download/linux/version_14x/teamviewer_14.0.12762_amd64.tar.xz",
                    "filename": "teamviewer.tar.xz",
                    "sha256": "5162430ef7b91234312654c8c7271a41e62d2f11c32e6137cfe3be42b36c3aa8",
                    "size": 19449912,
                    "x-checker-data": {
                        "type": "rotating-url",
                        "url": "https://download.teamviewer.com/download/linux/teamviewer_amd64.tar.xz",
                        "pattern": "https?://.*/teamviewer_([0-9.]+)_amd64.tar.xz"
                    }
                },
                {
                    "type": "extra-data",
                    "only-arches": [ "i386" ],
                    "url": "https://dl.tvcdn.de/download/linux/version_14x/teamviewer_14.0.12762_i386.tar.xz",
                    "filename": "teamviewer.tar.xz",
                    "sha256": "8e704f1527ac26b4a80893764c1b8a6f4180801769ed4c2f0bf3220b123537d2",
                    "size": 19462964,
                    "x-checker-data": {
                        "type": "rotating-url",
                        "url": "https://download.teamviewer.com/download/linux/teamviewer_i386.tar.xz",
                        "pattern": "https?://.*/teamviewer_([0-9.]+)_i386.tar.xz"
                    }
                }
            ]
        }
    ]
}

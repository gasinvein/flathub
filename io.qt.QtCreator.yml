id: io.qt.QtCreator
sdk: org.kde.Sdk
runtime: org.kde.Sdk
runtime-version: '5.15'
base: io.qt.qtwebengine.BaseApp
base-version: '5.15'
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --device=dri
  - --socket=pulseaudio
  - --allow=devel
  - --share=network
  - --socket=ssh-auth
  - --filesystem=~/.gitconfig
  - --filesystem=~/.ssh/known_hosts
command: qtcreator
rename-icon: QtProject-qtcreator
rename-desktop-file: org.qt-project.qtcreator.desktop
sdk-extensions:
  - org.freedesktop.Sdk.Extension.llvm11
build-options:
  prepend-path: /usr/lib/sdk/llvm11
cleanup:
  - /lib/*.a
  - /lib/*.la
cleanup-commands:
  - |
    cd /app/lib
    find /app/lib -maxdepth 1 -type l -name "libQt5*" | while read -r lnk; do
      ln -sfv "$(realpath --relative-to=/app/lib -s "$(readlink "$lnk")")" "$lnk"
    done
modules:
  - name: qtcreator
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
      - -DBUILD_PLUGIN_CLANGREFACTORING=ON
      - -DBUILD_PLUGIN_CLANGPCHMANAGER=ON
      - -DCMAKE_PREFIX_PATH=/usr/lib/sdk/llvm11
    sources:
      - type: git
        url: https://code.qt.io/qt-creator/qt-creator.git
        tag: v4.14.1
